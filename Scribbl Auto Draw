javascript:(function()%7B!function(t)%7Bvar e%3D%7B%7D%3Bfunction n(r)%7Bif(e%5Br%5D)return e%5Br%5D.exports%3Bvar o%3De%5Br%5D%3D%7Bi%3Ar%2Cl%3A!1%2Cexports%3A%7B%7D%7D%3Breturn t%5Br%5D.call(o.exports%2Co%2Co.exports%2Cn)%2Co.l%3D!0%2Co.exports%7Dn.m%3Dt%2Cn.c%3De%2Cn.d%3Dfunction(t%2Ce%2Cr)%7Bn.o(t%2Ce)%7C%7CObject.defineProperty(t%2Ce%2C%7Benumerable%3A!0%2Cget%3Ar%7D)%7D%2Cn.r%3Dfunction(t)%7B"undefined"!%3Dtypeof Symbol%26%26Symbol.toStringTag%26%26Object.defineProperty(t%2CSymbol.toStringTag%2C%7Bvalue%3A"Module"%7D)%2CObject.defineProperty(t%2C"__esModule"%2C%7Bvalue%3A!0%7D)%7D%2Cn.t%3Dfunction(t%2Ce)%7Bif(1%26e%26%26(t%3Dn(t))%2C8%26e)return t%3Bif(4%26e%26%26"object"%3D%3Dtypeof t%26%26t%26%26t.__esModule)return t%3Bvar r%3DObject.create(null)%3Bif(n.r(r)%2CObject.defineProperty(r%2C"default"%2C%7Benumerable%3A!0%2Cvalue%3At%7D)%2C2%26e%26%26"string"!%3Dtypeof t)for(var o in t)n.d(r%2Co%2Cfunction(e)%7Breturn t%5Be%5D%7D.bind(null%2Co))%3Breturn r%7D%2Cn.n%3Dfunction(t)%7Bvar e%3Dt%26%26t.__esModule%3Ffunction()%7Breturn t.default%7D%3Afunction()%7Breturn t%7D%3Breturn n.d(e%2C"a"%2Ce)%2Ce%7D%2Cn.o%3Dfunction(t%2Ce)%7Breturn Object.prototype.hasOwnProperty.call(t%2Ce)%7D%2Cn.p%3D""%2Cn(n.s%3D4)%7D(%5Bfunction(t%2Ce%2Cn)%7B"use strict"%3Bvar r%3Dn(1)%2Co%3Dn(2)%2Ca%3Dn(3)%2Ci%3Dt.exports%3D%7B%7D%3Bi.diff%3Dr.ciede2000%2Ci.rgb_to_lab%3Do.rgb_to_lab%2Ci.rgba_to_lab%3Do.rgba_to_lab%2Ci.map_palette%3Da.map_palette%2Ci.palette_map_key%3Da.palette_map_key%2Ci.map_palette_lab%3Da.map_palette_lab%2Ci.lab_palette_map_key%3Da.lab_palette_map_key%2Ci.match_palette_lab%3Da.match_palette_lab%2Ci.closest%3Dfunction(t%2Ce%2Cn)%7Bvar r%3Di.palette_map_key(t)%3Breturn n%3Dvoid 0!%3D%3Dn%3Fn%3A%7BR%3A255%2CG%3A255%2CB%3A255%7D%2Ci.map_palette(%5Bt%5D%2Ce%2C"closest"%2Cn)%5Br%5D%7D%2Ci.furthest%3Dfunction(t%2Ce%2Cn)%7Bvar r%3Di.palette_map_key(t)%3Breturn n%3Dvoid 0!%3D%3Dn%3Fn%3A%7BR%3A255%2CG%3A255%2CB%3A255%7D%2Ci.map_palette(%5Bt%5D%2Ce%2C"furthest"%2Cn)%5Br%5D%7D%2Ci.closest_lab%3Dfunction(t%2Ce)%7Breturn i.match_palette_lab(t%2Ce%2C!1)%7D%2Ci.furthest_lab%3Dfunction(t%2Ce)%7Breturn i.match_palette_lab(t%2Ce%2C!0)%7D%7D%2Cfunction(t%2Ce)%7B%0A%2F**%0A * %40author Markus Ekholm%0A * %40copyright 2012-2016 (c) Markus Ekholm <markus at botten dot org >%0A * %40license Copyright (c) 2012-2016%2C Markus Ekholm%0A * All rights reserved.%0A * Redistribution and use in source and binary forms%2C with or without%0A * modification%2C are permitted provided that the following conditions are met%3A%0A *    * Redistributions of source code must retain the above copyright%0A *      notice%2C this list of conditions and the following disclaimer.%0A *    * Redistributions in binary form must reproduce the above copyright%0A *      notice%2C this list of conditions and the following disclaimer in the%0A *      documentation and%2For other materials provided with the distribution.%0A *    * Neither the name of the author nor the%0A *      names of its contributors may be used to endorse or promote products%0A *      derived from this software without specific prior written permission.%0A *%0A * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND%0A * ANY EXPRESS OR IMPLIED WARRANTIES%2C INCLUDING%2C BUT NOT LIMITED TO%2C THE IMPLIED%0A * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE%0A * DISCLAIMED. IN NO EVENT SHALL MARKUS EKHOLM BE LIABLE FOR ANY%0A * DIRECT%2C INDIRECT%2C INCIDENTAL%2C SPECIAL%2C EXEMPLARY%2C OR CONSEQUENTIAL DAMAGES%0A * (INCLUDING%2C BUT NOT LIMITED TO%2C PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES%3B%0A * LOSS OF USE%2C DATA%2C OR PROFITS%3B OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND%0A * ON ANY THEORY OF LIABILITY%2C WHETHER IN CONTRACT%2C STRICT LIABILITY%2C OR TORT%0A * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS%0A * SOFTWARE%2C EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.%0A *%2F%0Ae.ciede2000%3Dfunction(t%2Ce)%7Bvar a%3Dt.L%2Cc%3Dt.a%2Cf%3Dt.b%2Cg%3De.L%2Ch%3De.a%2Cp%3De.b%2Cm%3Dn(r(c%2C2)%2Br(f%2C2))%2Cb%3Dn(r(h%2C2)%2Br(p%2C2))%2C_%3D(m%2Bb)%2F2%2Cy%3D.5*(1-n(r(_%2C7)%2F(r(_%2C7)%2Br(25%2C7))))%2Cv%3D(1%2By)*c%2Cw%3D(1%2By)*h%2CA%3Dn(r(v%2C2)%2Br(f%2C2))%2CC%3Dn(r(w%2C2)%2Br(p%2C2))%2Cx%3Dd(f%2Cv)%2CE%3Dd(p%2Cw)%2CS%3Dg-a%2Ck%3DC-A%2CM%3Dfunction(t%2Ce%2Cn%2Cr)%7Bif(t*e%3D%3D0)return 0%3Bif(l(r-n)<%3D180)return r-n%3Bif(r-n>180)return r-n-360%3Bif(r-n<-180)return r-n%2B360%3Bthrow new Error%7D(m%2Cb%2Cx%2CE)%2CB%3D2*n(A*C)*i(s(M)%2F2)%2CO%3D(a%2Bg)%2F2%2CL%3D(A%2BC)%2F2%2CP%3Dfunction(t%2Ce%2Cn%2Cr)%7Bif(t*e%3D%3D0)return n%2Br%3Bif(l(n-r)<%3D180)return(n%2Br)%2F2%3Bif(l(n-r)>180%26%26n%2Br<360)return(n%2Br%2B360)%2F2%3Bif(l(n-r)>180%26%26n%2Br>%3D360)return(n%2Br-360)%2F2%3Bthrow new Error%7D(m%2Cb%2Cx%2CE)%2CR%3D1-.17*o(s(P-30))%2B.24*o(s(2*P))%2B.32*o(s(3*P%2B6))-.2*o(s(4*P-63))%2CG%3D30*u(-r((P-275)%2F25%2C2))%2CT%3Dn(r(L%2C7)%2F(r(L%2C7)%2Br(25%2C7)))%2CX%3D1%2B.015*r(O-50%2C2)%2Fn(20%2Br(O-50%2C2))%2CD%3D1%2B.045*L%2C%24%3D1%2B.015*L*R%2CI%3D-2*T*i(s(2*G))%3Breturn n(r(S%2F(1*X)%2C2)%2Br(k%2F(1*D)%2C2)%2Br(B%2F(1*%24)%2C2)%2BI*(k%2F(1*D))*(B%2F(1*%24)))%7D%3Bvar n%3DMath.sqrt%2Cr%3DMath.pow%2Co%3DMath.cos%2Ca%3DMath.atan2%2Ci%3DMath.sin%2Cl%3DMath.abs%2Cu%3DMath.exp%2Cc%3DMath.PI%3Bfunction s(t)%7Breturn t*(c%2F180)%7Dfunction d(t%2Ce)%7Bif(0%3D%3D%3Dt%26%260%3D%3D%3De)return 0%3Bvar n%3Da(t%2Ce)*(180%2Fc)%3Breturn n>%3D0%3Fn%3An%2B360%7D%7D%2Cfunction(t%2Ce)%7B%0A%2F**%0A * %40author Markus Ekholm%0A * %40copyright 2012-2016 (c) Markus Ekholm <markus at botten dot org >%0A * %40license Copyright (c) 2012-2016%2C Markus Ekholm%0A * All rights reserved.%0A * Redistribution and use in source and binary forms%2C with or without%0A * modification%2C are permitted provided that the following conditions are met%3A%0A *    * Redistributions of source code must retain the above copyright%0A *      notice%2C this list of conditions and the following disclaimer.%0A *    * Redistributions in binary form must reproduce the above copyright%0A *      notice%2C this list of conditions and the following disclaimer in the%0A *      documentation and%2For other materials provided with the distribution.%0A *    * Neither the name of the author nor the%0A *      names of its contributors may be used to endorse or promote products%0A *      derived from this software without specific prior written permission.%0A *%0A * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND%0A * ANY EXPRESS OR IMPLIED WARRANTIES%2C INCLUDING%2C BUT NOT LIMITED TO%2C THE IMPLIED%0A * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE%0A * DISCLAIMED. IN NO EVENT SHALL MARKUS EKHOLM BE LIABLE FOR ANY%0A * DIRECT%2C INDIRECT%2C INCIDENTAL%2C SPECIAL%2C EXEMPLARY%2C OR CONSEQUENTIAL DAMAGES%0A * (INCLUDING%2C BUT NOT LIMITED TO%2C PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES%3B%0A * LOSS OF USE%2C DATA%2C OR PROFITS%3B OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND%0A * ON ANY THEORY OF LIABILITY%2C WHETHER IN CONTRACT%2C STRICT LIABILITY%2C OR TORT%0A * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS%0A * SOFTWARE%2C EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.%0A *%2F%0Ae.rgb_to_lab%3Dr%2Ce.rgba_to_lab%3Dfunction(t%2Ce)%7Breturn r(%7BR%3A(e%3Dvoid 0!%3D%3De%3Fe%3A%7BR%3A255%2CG%3A255%2CB%3A255%7D).R%2B(t.R-e.R)*t.A%2CG%3Ae.G%2B(t.G-e.G)*t.A%2CB%3Ae.B%2B(t.B-e.B)*t.A%7D)%7D%3Bvar n%3DMath.pow%3BMath.sqrt%3Bfunction r(t)%7Breturn function(t)%7Bvar e%3Dt.Y%2F100%2Cr%3Dt.Z%2F108.883%2Co%3Dt.X%2F95.047%3Bo%3Do>.008856%3Fn(o%2C1%2F3)%3A7.787*o%2B16%2F116%3Be%3De>.008856%3Fn(e%2C1%2F3)%3A7.787*e%2B16%2F116%3Br%3Dr>.008856%3Fn(r%2C1%2F3)%3A7.787*r%2B16%2F116%3Breturn%7BL%3A116*e-16%2Ca%3A500*(o-e)%2Cb%3A200*(e-r)%7D%7D(function(t)%7Bvar e%3Dt.R%2F255%2Cr%3Dt.G%2F255%2Co%3Dt.B%2F255%3Be>.04045%3Fe%3Dn((e%2B.055)%2F1.055%2C2.4)%3Ae%2F%3D12.92%3Br>.04045%3Fr%3Dn((r%2B.055)%2F1.055%2C2.4)%3Ar%2F%3D12.92%3Bo>.04045%3Fo%3Dn((o%2B.055)%2F1.055%2C2.4)%3Ao%2F%3D12.92%3Breturn%7BX%3A.4124*(e*%3D100)%2B.3576*(r*%3D100)%2B.1805*(o*%3D100)%2CY%3A.2126*e%2B.7152*r%2B.0722*o%2CZ%3A.0193*e%2B.1192*r%2B.9505*o%7D%7D(t))%7D%7D%2Cfunction(t%2Ce%2Cn)%7B%0A%2F**%0A * %40author Markus Ekholm%0A * %40copyright 2012-2016 (c) Markus Ekholm <markus at botten dot org >%0A * %40license Copyright (c) 2012-2016%2C Markus Ekholm%0A * All rights reserved.%0A * Redistribution and use in source and binary forms%2C with or without%0A * modification%2C are permitted provided that the following conditions are met%3A%0A *    * Redistributions of source code must retain the above copyright%0A *      notice%2C this list of conditions and the following disclaimer.%0A *    * Redistributions in binary form must reproduce the above copyright%0A *      notice%2C this list of conditions and the following disclaimer in the%0A *      documentation and%2For other materials provided with the distribution.%0A *    * Neither the name of the author nor the%0A *      names of its contributors may be used to endorse or promote products%0A *      derived from this software without specific prior written permission.%0A *%0A * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND%0A * ANY EXPRESS OR IMPLIED WARRANTIES%2C INCLUDING%2C BUT NOT LIMITED TO%2C THE IMPLIED%0A * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE%0A * DISCLAIMED. IN NO EVENT SHALL MARKUS EKHOLM BE LIABLE FOR ANY%0A * DIRECT%2C INDIRECT%2C INCIDENTAL%2C SPECIAL%2C EXEMPLARY%2C OR CONSEQUENTIAL DAMAGES%0A * (INCLUDING%2C BUT NOT LIMITED TO%2C PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES%3B%0A * LOSS OF USE%2C DATA%2C OR PROFITS%3B OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND%0A * ON ANY THEORY OF LIABILITY%2C WHETHER IN CONTRACT%2C STRICT LIABILITY%2C OR TORT%0A * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS%0A * SOFTWARE%2C EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.%0A *%2F%0Ae.map_palette%3Dfunction(t%2Ce%2Cn%2Cr)%7Bvar o%3D%7B%7D%3Br%3Dvoid 0!%3D%3Dr%3Fr%3A%7BR%3A255%2CG%3A255%2CB%3A255%7D%2Cn%3Dn%7C%7C"closest"%3Bfor(var i%3D0%3Bi<t.length%3Bi%2B%3D1)%7Bfor(var l%3Dt%5Bi%5D%2Cc%3Dvoid 0%2Cs%3Dvoid 0%2Cd%3D0%3Bd<e.length%3Bd%2B%3D1)%7Bvar f%3De%5Bd%5D%2Cg%3Du(l%2Cf%2Cr)%3Bnull%3D%3Dc%7C%7C"closest"%3D%3D%3Dn%26%26g<s%3F(c%3Df%2Cs%3Dg)%3A"furthest"%3D%3D%3Dn%26%26g>s%26%26(c%3Df%2Cs%3Dg)%7Do%5Ba(l)%5D%3Dc%7Dreturn o%7D%2Ce.map_palette_lab%3Dfunction(t%2Ce%2Cn)%7Bfor(var r%3D%7B%7D%2Co%3D"furthest"%3D%3D%3Dn%2Ca%3D0%3Ba<t.length%3Ba%2B%3D1)%7Bvar u%3Dt%5Ba%5D%3Br%5Bi(u)%5D%3Dl(u%2Ce%2Co)%7Dreturn r%7D%2Ce.match_palette_lab%3Dl%2Ce.palette_map_key%3Da%2Ce.lab_palette_map_key%3Di%3Bvar r%3Dn(1).ciede2000%2Co%3Dn(2)%3Bfunction a(t)%7Bvar e%3D"R"%2Bt.R%2B"B"%2Bt.B%2B"G"%2Bt.G%3Breturn"A"in t%26%26(e%3De%2B"A"%2Bt.A)%2Ce%7Dfunction i(t)%7Breturn"L"%2Bt.L%2B"a"%2Bt.a%2B"b"%2Bt.b%7Dfunction l(t%2Ce%2Cn)%7Bfor(var o%2Ca%2Ci%3De%5B0%5D%2Cl%3Dr(t%2Ci)%2Cu%3D1%2Cc%3De.length%3Bu<c%3Bu%2B%3D1)o%3De%5Bu%5D%2Ca%3Dr(t%2Co)%2C(!n%26%26a<l%7C%7Cn%26%26a>l)%26%26(i%3Do%2Cl%3Da)%3Breturn i%7Dfunction u(t%2Ce%2Cn)%7Bvar a%3Do.rgb_to_lab%2Ci%3Do.rgb_to_lab%2Cl%3Dfunction(t)%7Breturn o.rgba_to_lab(t%2Cn)%7D%3Breturn"A"in t%26%26(a%3Dl)%2C"A"in e%26%26(i%3Dl)%2Ct%3Da(t)%2Ce%3Di(e)%2Cr(t%2Ce)%7D%7D%2Cfunction(t%2Ce%2Cn)%7B"use strict"%3Bn.r(e)%3Bvar r%3Dn(0)%2Co%3Dn.n(r)%2Ca%3Dfunction(t)%7Bi%26%26console.log(%60skribbl.io AutoDraw%3A %24%7Bt%7D%60)%7D%3Blet i%3D!0%3Blet l%3Dfunction(t%2Ce)%7Ba(%60Scaling image to %24%7Bt.width%7D x %24%7Bt.height%7D...%60)%3Blet n%3Ddocument.createElement("canvas")%3Bn.width%3Dt.width%2Cn.height%3Dt.height%3Blet r%3Dn.getContext("2d")%3Breturn r.imageSmoothingEnabled%3D!1%2Ce(r)%2Cr.getImageData(0%2C0%2Cn.width%2Cn.height)%7D%3Bfunction u(t)%7Breturn new Promise((e%2Cn)%3D>%7Bconst r%3Dnew Image%3Br.crossOrigin%3D"Anonymous"%2Cr.onload%3Dfunction()%7B(r.height%3D%3D%3Dr.width%3D%3D%3D0%3Fn%3Ae)(r)%7D%2Cr.onerror%3Dn%2Ca(%60Attempting to load image%3A %24%7Bt%7D...%60)%2Cr.src%3Dt%7D)%7Dconst c%3Dfunction(t%2Ce)%7Blet n%3DMath.min(t.width%2Fe.width%2Ct.height%2Fe.height)%2Cr%3Dn*e.width%2Co%3Dn*e.height%3Breturn l(%7Bwidth%3Ar%2Cheight%3Ao%7D%2Ct%3D>t.drawImage(e%2C0%2C0%2Cr%2Co))%7D%3Bconst s%3Ddocument.getElementById("containerCanvas")%2Cd%3Ddocument.getElementById("buttonClearCanvas")%2Cf%3Dfunction(t)%7Bconst e%3Dt.getContext("2d")%3Blet n%3Dfunction(e)%7Blet n%3Dt.getBoundingClientRect()%3Breturn%7Bx%3Ae.x*n.width%2F800%2Bn.x%2Cy%3Ae.y*n.height%2F600%2Bn.y%7D%7D%2Cr%3Dfunction(t%2Ce)%7Breturn new MouseEvent(t%2C%7Bbubbles%3A!0%2CclientX%3Ae.x%2CclientY%3Ae.y%2Cbutton%3A0%7D)%7D%3Breturn%7Bsize%3A%7Bwidth%3A800%2Cheight%3A600%7D%2Cdraw%3Afunction(e)%7Blet o%3Dn(e%5B0%5D)%3Bt.dispatchEvent(r("mousedown"%2Co))%3Bfor(let o%3D1%3Bo<e.length%3Bo%2B%2B)%7Blet a%3Dn(e%5Bo%5D)%3Bt.dispatchEvent(r("mousemove"%2Ca))%7Dlet a%3Dn(e%5Be.length-1%5D)%3Bt.dispatchEvent(r("mouseup"%2Ca))%7D%2CawaitClear%3Afunction(t)%7Be.fillStyle%3D"%23000000"%3Blet n%3Dfunction()%7B"%23ffffff"%3D%3D%3De.fillStyle%3Ft()%3AsetTimeout(n%2C1)%7D%3Bn()%7D%7D%7D(document.getElementById("canvasGame"))%2Cg%3Dfunction(t)%7Blet e%3DArray.prototype.slice.call(t.querySelectorAll(".colorItem"))%2Cn%3De.map(t%3D>function(t)%7Blet e%3Dt.substring(4%2Ct.length-1).split("%2C ")%3Breturn%7Br%3AparseInt(e%5B0%5D)%2Cg%3AparseInt(e%5B1%5D)%2Cb%3AparseInt(e%5B2%5D)%7D%7D(t.style.backgroundColor))%2Cr%3Dnew Map(e.map(t%3D>%5Bt.style.backgroundColor%2Ct%5D))%2Co%3DArray.prototype.slice.call(t.querySelectorAll(".brushSize"))%2Ca%3D%7B2.9%3Ao.find(t%3D>"0"%3D%3D%3Dt.getAttribute("data-size"))%2C7%3Ao.find(t%3D>"0.15"%3D%3D%3Dt.getAttribute("data-size"))%2C19%3Ao.find(t%3D>"0.45"%3D%3D%3Dt.getAttribute("data-size"))%2C39%3Ao.find(t%3D>"1"%3D%3D%3Dt.getAttribute("data-size"))%7D%2Ci%3Dt.querySelector("%23buttonClearCanvas")%2Cl%3DArray.prototype.slice.call(t.querySelectorAll("%5Bdata-tool%5D"))%2Cu%3Dl.find(t%3D>"pen"%3D%3D%3Dt.getAttribute("data-tool"))%2Cc%3Dl.find(t%3D>"fill"%3D%3D%3Dt.getAttribute("data-tool"))%3Breturn%7BgetColors%3A()%3D>n%2CsetColor%3At%3D>%7Blet e%3D%60rgb(%24%7B(n%3Dt).r%7D%2C %24%7Bn.g%7D%2C %24%7Bn.b%7D)%60%3Bvar n%3Br.get(e).click()%7D%2CgetPenDiameters%3A()%3D>%5B2.9%2C7%2C19%2C39%5D%2CsetPenDiameter%3At%3D>%7Ba%5Bt%5D.click()%7D%2Cclear%3A()%3D>%7Bi.click()%7D%2CsetPenTool%3A()%3D>%7Bu.click()%7D%2CsetFillTool%3A()%3D>%7Bc.click()%7D%2CisEnabled%3A()%3D>"none"!%3D%3Dt.style.display%7D%7D(document.querySelector(".containerToolbar"))%2Ch%3Dfunction(t%2Ce)%7Bconst n%3Dfunction(t)%7Blet e%3Dt.map(t%3D>o.a.rgb_to_lab(%7BR%3At.r%2CG%3At.g%2CB%3At.b%7D))%3Breturn%7BgetClosestColor%3Afunction(n%2Cr)%7Blet a%3DJSON.stringify(n)%3Bif(a in r)return r%5Ba%5D%3Blet i%3Do.a.rgb_to_lab(%7BR%3An.r%2CG%3An.g%2CB%3An.b%7D)%2Cl%3DNumber.MAX_VALUE%2Cu%3Dnull%3Bfor(let n%3D0%3Bn<e.length%3Bn%2B%2B)%7Blet r%3Do.a.diff(i%2Ce%5Bn%5D)%3Br>%3Dl%7C%7C(l%3Dr%2Cu%3Dt%5Bn%5D)%7Dreturn r%5Ba%5D%3Du%2Cu%7D%7D%7D(e.getColors())%2Cr%3D%7Bwidth%3At.size.width%2F2.9%2Cheight%3At.size.height%2F2.9%7D%3Breturn%7Bdraw%3Afunction(o)%7Bconst i%3Dc(r%2Co)%3Ba("Generating draw commands...")%3Blet l%3D%5B%5D%3Bconst u%3Dfunction(t)%7Bconst e%3Dt.data%2Cr%3D%7B%7D%2Co%3D%5B%5D%3Blet a%3D0%2Ci%3Dnull%2Cl%3D0%3Bfor(let u%3D0%3Bu<t.height%3Bu%2B%2B)%7Bfor(let c%3D0%3Bc<t.width%3Bc%2B%2B)%7Bconst t%3D%7Br%3Ae%5Bl%2B0%5D%2Cg%3Ae%5Bl%2B1%5D%2Cb%3Ae%5Bl%2B2%5D%7D%2Cs%3Dn.getClosestColor(t%2Cr)%3Bnull!%3Di%3F(i!%3Ds%26%26(o.push(%7By%3Au%2CstartX%3Aa%2CendX%3Ac-1%2Ccolor%3Ai%7D)%2Ca%3Dc%2Ci%3Ds)%2Cl%2B%3D4)%3Ai%3Ds%7Do.push(%7By%3Au%2CstartX%3Aa%2CendX%3At.width-1%2Ccolor%3Ai%7D)%2Ca%3D0%2Ci%3Dnull%2Cl%2B%3D4%7Dreturn o%7D(i)%2Cs%3Dfunction(t)%7Bconst e%3D%7B%7D%3Bfor(const n of t)%7Bconst t%3DJSON.stringify(n.color)%3Be%5Bt%5D%3D(e%5Bt%5D%7C%7C0)%2B1%7Dconst n%3DObject.keys(e).reduce((t%2Cn)%3D>e%5Bt%5D>e%5Bn%5D%3Ft%3An)%3Breturn JSON.parse(n)%7D(u)%3Bvar d%3Bl%3Dl.concat((d%3Ds%2C%5Bfunction()%7Be.setFillTool()%2Ce.setColor(d)%2Ct.draw(%5B%7Bx%3A0%2Cy%3A0%7D%2C%7Bx%3A0%2Cy%3A0%7D%5D)%7D%5D))%3Bconst f%3Du.filter(t%3D>JSON.stringify(t.color)!%3DJSON.stringify(s)).sort(()%3D>.5-Math.random()).sort((t%2Ce)%3D>%7Bconst n%3Dt.endX-t.startX%2Cr%3De.endX-e.startX%3Breturn n>r%3F-1%3An%3D%3Dr%3F0%3A1%7D)%3Blet g%3D%7Bx%3A(r.width-i.width)%2F2%2B.5%2Cy%3A(r.height-i.height)%2F2%2B.5%7D%3Breturn l%3Dl.concat(function(n%2Cr)%7Bconst o%3D%5B%5D%3Bfor(const a of n)o.push((function()%7Be.setPenTool()%2Ce.setColor(a.color)%2Ce.setPenDiameter(2.9)%2Ct.draw(%5B%7Bx%3A2.9*(a.startX%2Br.x)%2Cy%3A2.9*(a.y%2Br.y)%7D%2C%7Bx%3A2.9*(a.endX%2Br.x)%2Cy%3A2.9*(a.y%2Br.y)%7D%5D)%7D))%3Breturn o%7D(f%2Cg))%2Ca(%60%24%7Bl.length%7D commands generated.%60)%2Cl%7D%7D%7D(f%2Cg)%2Cp%3Ddocument.createElement("div")%3Bp.id%3D"autoDrawOverlay"%3Blet m%3D%5B%5D%3Bconst b%3Dfunction(t)%7BsetTimeout((function()%7Bdocument.body.classList.remove("showingAutodrawOverlay")%7D)%2Ct%7C%7C0)%7D%2C_%3Dfunction(t)%7Bp.innerText%3Dt%2Cdocument.body.classList.add("showingAutodrawOverlay")%7D%2Cy%3Dfunction(t)%7Ba("Clearing canvas...")%2Cg.clear()%2Cf.awaitClear((function()%7Ba(%60Drawing %24%7Bt.width%7D x %24%7Bt.height%7D image...%60)%2Cm%3Dm.concat(h.draw(t))%2Cb()%2Cfunction(t%2Ce)%7Bconst n%3Dfunction()%7Bif(!t.length)return a("Processing finished.")%3Bif(e%26%26e())return a("Processing stopped.")%3Bt.shift()()%2Ct.length%25100%3D%3D0%26%26t.length>0%26%26a(%60%24%7Bt.length%7D commands remaining to process.%60)%2CsetTimeout(n%2C0)%7D%3Ba(%60Processing %24%7Bt.length%7D commands...%60)%2Cn()%7D(m%2C()%3D>!g.isEnabled())%7D))%7D%3B!function(t%2Ce%2Cn%2Cr)%7Blet o%3D0%3Bt.addEventListener("dragenter"%2C(function(t)%7B0%3D%3D%3Do%26%26e(t)%2Co%2B%2B%7D))%2Ct.addEventListener("dragleave"%2C(function(t)%7Bo--%2C0%3D%3D%3Do%26%26n(t)%7D))%2Ct.addEventListener("drop"%2C(function(t)%7Bo%3D0%2Cr(t)%7D))%2Ct.addEventListener("dragover"%2C(function(t)%7Bt.preventDefault()%7D))%7D(document%2C(function()%7Bg.isEnabled()%26%26_("Drop image here to auto draw!")%7D)%2Cb%2C(function(t)%7Bif(t.preventDefault()%2C!s.contains(t.target))return b()%3Bif(!g.isEnabled())return a("Can't draw right now.")%2Cb()%3Ba("Processing dropped content...")%2C_("Auto draw is loading image...")%3Bconst e%3D((n%3Dt.dataTransfer).files.length%26%26n.files%5B0%5D.type.startsWith("image%2F")%3FURL.createObjectURL(n.files%5B0%5D)%3Anull)%7C%7Cfunction(t)%7Blet e%3Dt.getData("text%2Fhtml")%3Bif(!e)return null%3Blet n%3Ddocument.createElement("div")%3Bn.innerHTML%3De%3Blet r%3Dn.getElementsByTagName("img")%3Breturn r.length%3Fr%5B0%5D.getAttribute("src")%3Avoid 0%7D(t.dataTransfer)%3Bvar n%3Bif(!e)return _("Auto draw couldn't load image %3A(")%2Ca("Dropped content not recognized.")%2Cb(2500)%3Bu(e).catch(()%3D>u("https%3A%2F%2Fskribbl-io-autodraw-cors-proxy.galehouse5.workers.dev%3F"%2Be)).then(y).catch(()%3D>a(%60Couldn't load image%3A %24%7Be%7D. Sorry %3A(%60))%7D))%2Cd.addEventListener("click"%2C(function()%7Bm.length%26%26(a("Clearing commands...")%2Cm.length%3D0%2Ca("Drawing stopped."))%7D))%2Cs.appendChild(p)%7D%5D)%3B%7D)()%3B
